# Run k6 POC API Performance Test

trigger: none

pool:
  vmImage: ubuntu-latest

steps:

  - task: k6-load-test@0
    inputs:
      filename: 'src/scripts/pocApiScript.js'
    displayName: 'Run k6 POC API Test'
  
  - task: PublishTestResults@2
    inputs:
      testResultsFormat: 'JUnit'
      testResultsFiles: '**/results/report.json'
      failTaskOnFailedTests: true
      failTaskOnFailureToPublishResults: true
      failTaskOnMissingResultsFile: true
      testRunTitle: 'k6 POC API Test Results'